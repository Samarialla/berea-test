<div *ngIf="product() as product; else loading" class="container mt-4 mb-3">
   <div class="row">
      <div class="col-12 col-md-5 mb-3 d-flex justify-content-center">
         <div class="position-relative w-100" style="max-width: 400px;">
            <img [src]="selectedImage()" [alt]="product.title" class="img-fluid rounded w-100"
               style="height: 400px; object-fit: cover;" />
            <button class="btn position-absolute top-50 start-0 translate-middle-y" (click)="prevImage()"
               style="z-index: 10;">
               ‹
            </button>
            <button class="btn position-absolute top-50 end-0 translate-middle-y" (click)="nextImage()"
               style="z-index: 10;">
               ›
            </button>
         </div>
      </div>

      <div class="col-12 col-md-7 d-flex flex-column justify-content-start align-items-start p-2">
         <a class="btn btn-outline-secondary mb-2" [routerLink]="['/home']"><i style="font-size: 12px;" class="material-icons me-2">arrow_back</i>Volver</a>
         <h2 class="fw-bold">{{ product.title }}</h2>
         <p>{{ product.description }}</p>
         <h4 class="mt-2">{{ product.price }}$</h4>
         <span class="badge rounded-pill bg-success mt-3">{{ product.category?.name }}</span>
      </div>
   </div>
   <h5 class="mt-5">Productos Relacionados</h5>
   <div class="row mt-3" *ngIf="relatedProducts().length">
      <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-3" *ngFor="let p of relatedProducts()">
         <a [routerLink]="['/products', p.id]" class="text-decoration-none text-dark">
            <div class="card h-100">
               <img [src]="p.images[0]" class="card-img-top" [alt]="p.title" loading="lazy" />
               <div class="card-body p-2">
                  <span class="card-title">{{ p.title }}</span>
               </div>
            </div>
         </a>
      </div>
   </div>
</div>



<ng-template #loading>
   <app-spinner></app-spinner>
</ng-template>