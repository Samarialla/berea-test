<div *ngIf="product() as product; else loading" class="d-flex justify-content-center align-items-start mt-4 mb-3">
   <div class="d-flex gap-4">
      <div class="position-relative">
         <img [src]="selectedImage()" [alt]="product.title" class="img-fluid rounded"
            style="max-width: 320px; max-height: 400px; height: 400px; object-fit: cover;" />
         <button class="btn btn-light position-absolute top-50 start-0 translate-middle-y" (click)="prevImage()"
            style="z-index: 10;">
            ‹
         </button>
         <button class="btn btn-light position-absolute top-50 end-0 translate-middle-y" (click)="nextImage()"
            style="z-index: 10;">
            ›
         </button>
      </div>
      <div class="d-flex flex-column justify-content-start align-items-start p-1">
         <a type="button" class="btn btn-outline-secondary" [routerLink]="['/home']">Volver</a>
         <h2 class="bold">{{ product.title }}</h2>
         <small>{{ product.description }}</small>
         <h4 class="mt-3">{{ product.price }}$</h4>
         <small class="badge rounded-pill bg-success mt-4">{{ product.category?.name }}</small>
      </div>
   </div>

</div>
<h4>Productos Relacionados</h4>
<div class="row mt-3 " *ngIf="relatedProducts().length">
   <div class="col-md-1 mb-3 relation-product" *ngFor="let p of relatedProducts()">
      <a [routerLink]="['/products', p.id]" class="text-decoration-none text-dark">
         <div class="card h-100">
            <img [src]="p.images[0]" class="card-img-top" [alt]="p.title" loading="lazy" />
            <div class="card-body">
               <span class="card-title">{{ p.title }}</span>
            </div>
         </div>
      </a>
   </div>
</div>

<ng-template #loading>
   <app-spinner></app-spinner>
</ng-template>